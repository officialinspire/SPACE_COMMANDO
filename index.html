<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SPACE COMMANDO – Side‑Scrolling Shooter</title>
  <!-- Link the stylesheet for basic page and HUD styling -->
  <link rel="stylesheet" href="styles.css">
  <!-- Import a retro sci‑fi font for the heads‑up display.  Orbitron provides
       a clean, futuristic look while Press Start 2P adds a pixel‑retro
       flavour.  These fonts are free to use via Google Fonts.  -->
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Game container groups the intro video and the canvas together so
       the credit sequence plays within the game area instead of
       filling the entire screen.  The intro will start once the
       player interacts with the page (a requirement for audio
       playback on many mobile browsers) and hides itself when
       finished. -->
  <div id="game-container">
    <video id="intro-video" class="intro-video" src="inspiresoftwareintro.mp4" playsinline></video>
    <canvas id="game-canvas" width="800" height="450"></canvas>
  </div>

  <!-- Overlay message prompting the user to rotate their device when in
       portrait orientation.  Only shown on small screens where
       landscape mode is required for gameplay. -->
  <div id="rotate-overlay">Please rotate your device to landscape mode to play.</div>

  <!--
    On touch‑enabled devices a custom control bar appears beneath the
    game.  These controls mirror the keyboard inputs (movement,
    jump, shoot, reload, store, select and menu) so that the
    touchscreen can be used for gameplay.  Each button carries a
    data‑key attribute corresponding to the key it triggers.

    The layout loosely follows the provided mock‑up (mobile_uxui_controls.png):
    shoot/reload on the far left, a central cluster for store, jump
    and select, a directional pad to the right, and a menu button
    anchored on the far right.  The container is hidden on desktop
    and only shown on mobile via JavaScript.
  -->
  <div id="mobile-controls" class="mobile-controls">
    <div class="controls-left">
      <button data-key="z" class="control-btn">SHOOT</button>
      <button data-key="x" class="control-btn">RELOAD</button>
    </div>
    <div class="controls-center">
      <button data-key="p" class="control-btn">STORE</button>
      <button data-key=" " class="control-btn">JUMP</button>
      <button data-key="Enter" class="control-btn">SELECT</button>
    </div>
    <div class="controls-arrows">
      <button data-key="ArrowUp" class="control-btn arrow-btn">↑</button>
      <div class="arrow-row">
        <button data-key="ArrowLeft" class="control-btn arrow-btn">←</button>
        <button data-key="ArrowDown" class="control-btn arrow-btn">↓</button>
        <button data-key="ArrowRight" class="control-btn arrow-btn">→</button>
      </div>
    </div>
    <!-- The right-most button triggers the escape key to toggle the game menu.  Labelled
         “ESC” to match the keyboard input for clarity. -->
    <button data-key="Escape" class="control-btn menu-btn">ESC</button>
  </div>

  <!-- Main game logic -->
  <script src="index.js"></script>

  <!-- Hide the intro once it finishes playing.  Listening on the
       ended event ensures that the game only becomes visible when
       the credit video is complete. -->
  <script>
    const introVideo = document.getElementById('intro-video');
    if (introVideo) {
      // Hide the video once playback ends
      introVideo.addEventListener('ended', () => {
        introVideo.style.display = 'none';
      });
      // Start the video with audio when the user first interacts
      const startVideo = () => {
        if (introVideo.paused) {
          try {
            introVideo.muted = false;
            introVideo.play();
          } catch (err) {
            // ignore autoplay rejection
          }
        }
      };
      document.addEventListener('click', startVideo, { once: true });
      document.addEventListener('keydown', startVideo, { once: true });
    }
  </script>
</body>
</html>
